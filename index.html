<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Phone Name System</title>
    <style>
      body { font-family: Arial; text-align: center; margin-top: 80px; }
      input { padding: 8px; margin: 5px; width: 240px; }
      button { padding: 8px 20px; cursor: pointer; }
    </style>
  </head>
  <body>
    <h1>ðŸ“± Phone Name System</h1>
    <p>Register your handle or resolve a phone number</p>

    <h3>Register</h3>
    <input id="handle" placeholder="@username"><br>
    <input id="phone" placeholder="+1234567890"><br>
    <button onclick="register()">Register</button>

    <h3>Resolve</h3>
    <input id="lookup" placeholder="Enter phone number"><br>
    <button onclick="resolve()">Resolve</button>

    <pre id="output"></pre>

    <script>
      const baseURL = "https://pns-prototype.onrender.com";

      async function register() {
        const handle = document.getElementById('handle').value;
        const phone = document.getElementById('phone').value;
        const res = await fetch(baseURL + "/register", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ handle, phone })
        });
        const data = await res.json();
        document.getElementById('output').textContent = JSON.stringify(data, null, 2);
      }

      async function resolve() {
        const number = document.getElementById('lookup').value;
        const res = await fetch(baseURL + "/resolve?number=" + encodeURIComponent(number));
        const data = await res.json();
        document.getElementById('output').textContent = JSON.stringify(data, null, 2);
      }
    </script>
  </body>
</html>
